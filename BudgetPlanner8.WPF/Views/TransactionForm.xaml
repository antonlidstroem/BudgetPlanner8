<UserControl x:Class="BudgetPlanner8.WPF.Views.TransactionForm"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Border Style="{StaticResource CardStyle}">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <Grid Margin="5">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="140"/>
                    <ColumnDefinition Width="260"/>
                    <ColumnDefinition Width="120"/>
                </Grid.ColumnDefinitions>

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Rubrik -->
                <TextBlock Grid.Row="0" Grid.ColumnSpan="3"
                           Text="{Binding FormTitle}"
                           Style="{StaticResource HeaderTextStyle}"
                           Margin="0,0,0,15"/>

                <!-- Startdatum -->
                <TextBlock Grid.Row="1" Text="Startdatum:"
                           Style="{StaticResource LabelTextStyle}"/>
                <DatePicker Grid.Row="1" Grid.Column="1"
                            SelectedDate="{Binding Form.StartDate}"/>
                <CheckBox Grid.Row="1" Grid.Column="2"
                          IsChecked="{Binding FormFilter.FilterByStartDate}"/>

                <!-- Slutdatum -->
                <Grid Grid.Row="2" Grid.ColumnSpan="3"
                      Visibility="{Binding Form.ShowEndDate,
                                           Converter={StaticResource BoolToVisibilityConverter}}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="140"/>
                        <ColumnDefinition Width="260"/>
                        <ColumnDefinition Width="120"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Text="Slutdatum:"
                               Style="{StaticResource LabelTextStyle}"/>
                    <DatePicker Grid.Column="1"
                                SelectedDate="{Binding Form.EndDate}"/>
                    <CheckBox Grid.Column="2"
                              IsChecked="{Binding FormFilter.FilterByEndDate}"/>
                </Grid>

                <!-- Anteckning -->
                <TextBlock Grid.Row="3" Text="Anteckning:"
                           Style="{StaticResource LabelTextStyle}"/>
                <TextBox Grid.Row="3" Grid.Column="1"
                         Text="{Binding Form.Description}"/>
                <CheckBox Grid.Row="3" Grid.Column="2"
                          IsChecked="{Binding FormFilter.FilterByDescription}"/>

                <!-- Belopp -->
                <TextBlock Grid.Row="4" Text="Belopp:"
                           Style="{StaticResource LabelTextStyle}"/>
                <TextBox Grid.Row="4" Grid.Column="1"
                         Text="{Binding Form.NetAmount, UpdateSourceTrigger=PropertyChanged}"/>
                <CheckBox Grid.Row="4" Grid.Column="2"
                          IsChecked="{Binding FormFilter.FilterByAmount}"/>

                <!-- Kategori -->
                <TextBlock Grid.Row="5" Text="Kategori:"
                           Style="{StaticResource LabelTextStyle}"/>
                <ComboBox Grid.Row="5" Grid.Column="1"
                          ItemsSource="{Binding Categories}"
                          DisplayMemberPath="Name"
                          SelectedItem="{Binding Form.Category}"
                          ItemContainerStyle="{StaticResource CategoryComboBoxItemStyle}"/>

                <CheckBox Grid.Row="5" Grid.Column="2"
                          IsChecked="{Binding FormFilter.FilterByCategory}"/>

                <!-- Återkommande -->
                <TextBlock Grid.Row="6" Text="Återkommande:"
                           Style="{StaticResource LabelTextStyle}"/>
                <ComboBox Grid.Row="6" Grid.Column="1"
                          ItemsSource="{Binding Form.RecurrenceValues}"
                          SelectedItem="{Binding Form.Recurrence}"/>
                <CheckBox Grid.Row="6" Grid.Column="2"
                          IsChecked="{Binding FormFilter.FilterByRecurrence}"/>

                <!-- Månad -->
                <Grid Grid.Row="7" Grid.ColumnSpan="3"
                      Visibility="{Binding Form.ShowMonth,
                                           Converter={StaticResource BoolToVisibilityConverter}}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="140"/>
                        <ColumnDefinition Width="260"/>
                        <ColumnDefinition Width="120"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Text="Månad:"
                               Style="{StaticResource LabelTextStyle}"/>
                    <ComboBox Grid.Column="1"
                              ItemsSource="{Binding Form.Months}"
                              SelectedItem="{Binding Form.Month}"/>
                    <CheckBox Grid.Column="2"
                              IsChecked="{Binding FormFilter.FilterByMonth}"/>
                </Grid>

                <!-- Brutto / Netto -->
                <TextBlock Grid.Row="8" Text="Netto / Brutto"
                           Style="{StaticResource LabelTextStyle}"
                           Visibility="{Binding Form.ShowGrossNetToggle,
                                                Converter={StaticResource BoolToVisibilityConverter}}"/>
                <CheckBox Grid.Row="8" Grid.Column="1"
                          Content="Ange som brutto"
                          IsChecked="{Binding Form.IsGross}"
                          Visibility="{Binding Form.ShowGrossNetToggle,
                                               Converter={StaticResource BoolToVisibilityConverter}}"/>

                <!-- Knappar -->
                <StackPanel Grid.Row="9" Grid.ColumnSpan="3"
                            Orientation="Horizontal" Margin="0,15,0,0">
                    <Button Content="Lägg till"
                    Style="{StaticResource EditModeButtonStyle}"
                    Command="{Binding AddCommand}"/>

                                <Button Content="Uppdatera"
                    Style="{StaticResource EditModeButtonStyle}"
                    Command="{Binding UpdateCommand}"/>

                                <Button Content="Avbryt"
                    Style="{StaticResource EditModeButtonStyle}"
                    Command="{Binding CancelEditCommand}"/>

                                <Button Content="Ta bort"
                    Style="{StaticResource EditModeButtonStyle}"
                    Command="{Binding DeleteCommand}"/>

                </StackPanel>

            </Grid>
        </ScrollViewer>
    </Border>
</UserControl>
